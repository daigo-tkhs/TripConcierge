<%# app/views/messages/destroy.turbo_stream.erb %>

<%# 1. 削除したユーザーメッセージを画面から消す %>
<%= turbo_stream.remove dom_id(@message) %>

<%# 2. 道連れにしたAIの返答なども画面から消す %>
<% @deleted_message_ids.each do |id| %>
  <%= turbo_stream.remove "message_#{id}" %>
<% end %>

<%# 3. フラッシュメッセージを表示 %>
<%= turbo_stream.prepend "flash_container" do %>
  <%= render "shared/flash_messages" %>
<% end %>