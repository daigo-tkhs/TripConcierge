<%# app/views/messages/index.html.erb %>

<div class="chat-container">
  <div class="chat-header">
    <h1><%= @trip.title %> „ÅÆAI„ÉÅ„É£„ÉÉ„Éà</h1>
    <%= link_to 'ÊóÖÁ®ã„Å´Êàª„Çã', trip_path(@trip), class: "back-link" %>
  </div>

  <div class="messages-list">
    <% @messages.each do |message| %>
      <%# „É¶„Éº„Ç∂„Éº„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏ %>
      <div class="message user-message">
        <div class="message-content">
          <p><%= message.prompt %></p>
        </div>
      </div>

      <%# AI„ÅÆËøîÁ≠î %>
      <% if message.response.present? %>
        <div class="message ai-message">
          <div class="ai-icon">ü§ñ</div>
          <div class="message-content">
            <%# simple_format„ÅßÊîπË°å„ÇíÂèçÊò† %>
            <%= simple_format(message.response) %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>

  <div class="message-form-container">
    <%= form_with model: [@trip, @message], local: true, class: "message-form" do |f| %>
      <div class="input-group">
        <%= f.text_area :prompt, placeholder: "AI„Å´ÊóÖ„ÅÆÁõ∏Ë´á„Çí„Åô„Çã...", rows: 2, class: "chat-input" %>
        <%= f.button type: "submit", class: "send-button" do %>
          ÈÄÅ‰ø°
        <% end %>
      </div>
    <% end %>
  </div>
</div>