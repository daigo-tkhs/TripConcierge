<% messages = local_assigns[:message] ? [[local_assigns[:type] || :notice, local_assigns[:message]]] : flash %>

<div class="fixed top-24 right-5 z-[100] flex flex-col gap-3 pointer-events-none w-full max-w-sm">
  <% messages.each do |message_type, msg| %>
    <% if msg.present? %>
      <% 
        color_class = case message_type.to_sym
                      when :notice then "bg-blue-500 text-white"
                      when :alert, :error then "bg-red-500 text-white"
                      else "bg-gray-500 text-white"
                      end
      %>
      <div data-controller="flash"
           class="flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl <%= color_class %> w-full transform transition-all duration-500 pointer-events-auto"
           role="alert">
        
        <span class="text-xl flex-shrink-0">
          <%= message_type.to_sym == :notice ? "✅" : "⚠️" %>
        </span>

        <div class="font-bold text-sm flex-1">
          <%= msg %>
        </div>

        <button type="button" data-action="click->flash#dismiss" class="ml-2 text-xl font-bold opacity-70 hover:opacity-100 p-1">
          ×
        </button>
      </div>
    <% end %>
  <% end %>
</div>